<!-- Heading -->
<div class="flex flex-col flex-column space-y-1.5 pb-1">
  <h2 class="font-semibold text-lg m-0">{{config().title ?? 'Chatbot'}}</h2>
  <p *ngIf="config().subtitle" class="text-sm p-0 m-0">{{config().subtitle}}</p>
</div>

<!-- Chat Container -->
<div class="pr-4" style="min-width: 100%; display: table;" style="max-width: 440px; height: 474px; overflow: scroll;">

  @for (message of messages(); track $index) {
    <div class="flex gap-3 my-4 text-gray-600 text-sm flex-1">
      <p-avatar icon="pi pi-sparkles" size="large" [style]="{ 'background-color': message.type == messageTypeUser ? 'rgb(243 244 246, 1)' : '#ece9fc', color: '#2a1261' }" shape="circle" />
      <p class="leading-relaxed">
        <span class="block font-bold text-gray-700">{{message.sender}} </span> {{message.message}}
      </p>
    </div>
  }

  <p-progressBar *ngIf="loading()" mode="indeterminate" [style]="{ height: '6px' }" />

</div>

<!-- Input box  -->
<div class="flex items-center pt-0">
  <form class="flex items-center justify-center w-full space-x-2">
    <input type="text" [formControl]="inputMessage" pInputText [placeholder]="config().inputPlaceholder ?? ''" class="w-full mr-2" />
    <p-button [label]="config().sendButton ?? 'Send'" size="large" (onClick)="onClickSend()" [disabled]="inputMessage.value == undefined || inputMessage.value == ''" type="button" />
  </form>
</div>
