<div
    class="flex flex-col flex-1 min-h-0 bg-white dark:bg-gray-900 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700">
    <!-- Header -->
    @if (conversation() && conversation()!.user) {
    <mc-user-header-chat [user]="conversation()!.user!" />
    }

    <!-- Messages Body -->
    <div class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900">
        <!-- Message Item -->
        @for (msg of conversation().messages; track $index) {
        <div class="mb-3">
            <ng-container *ngComponentOutlet="getComponent(msg.type); inputs: { message: msg }"></ng-container>
        </div>
        }
    </div>

    <!-- Footer / Input Area -->
    <mc-writing-conversation />

</div>