<div
    class="flex flex-col h-full bg-white dark:bg-gray-900 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700">
    <!-- Header -->
    <div class="flex items-center p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800">
        <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" shape="circle"
            size="large" styleClass="mr-3">
        </p-avatar>
        <div>
            <h2 class="text-lg font-semibold text-gray-800 dark:text-white">Amy Elsner</h2>
            <p class="text-sm text-green-500 flex items-center">
                <span class="w-2 h-2 rounded-full bg-green-500 mr-2"></span>
                Online
            </p>
        </div>
    </div>

    <!-- Messages Body -->
    <div class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900">
        <!-- Message Item -->
        @for (msg of conversation().messages; track $index) {
        <div class="mb-3">
            <ng-container *ngComponentOutlet="getComponent(msg.type); inputs: { message: msg }"></ng-container>
        </div>
        }
    </div>

    <!-- Footer / Input Area -->
    <div class="p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
        <div class="flex gap-2">
            <input pInputText type="text" class="flex-1 w-full" placeholder="Type a message..." [(ngModel)]="newMessage"
                (keydown.enter)="sendMessage()" />

            <p-button icon="pi pi-send" (onClick)="sendMessage()" styleClass="p-button-rounded p-button-primary">
            </p-button>
        </div>
    </div>
</div>